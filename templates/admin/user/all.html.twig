{% extends 'base.html.twig' %}

{% block title %}Svi korisnici - Admin{% endblock %}

{% block body %}


    <table class="table table-hover bg-light">
        <tr>
            <th>RB</th>
            <th>Ime</th>
            <th>Prezime</th>
            <th>Email</th>
            <th>Role</th>
            <th></th>
        </tr>
        {% set counter = 1 %}
        {% for user in users %}
            <tr>
                <td>{{ counter }}</td>
                <td>{{ user.firstName }}</td>
                <td>{{ user.lastName }}</td>
                <td>{{ user.email }}</td>
                <td>{% for role in user.roles %} {{ role }}, {% endfor %}</td>
                <td>
                    <a href="{{ path('admin_edit_user', { 'id': user.id}) }}" class="btn btn-warning">Izmeni</a>
                    <a href="{{ path('admin_delete_user', {'id': user.id}) }}" class="btn btn-danger">Izbrisi</a>
                    {% set break = false %}
                    {% for role in user.roles %}
                        {% if not break %}
                            {% if role == "ROLE_ADMIN" %}
                                <a href="{{ path('admin_make_user_regular', {'id': user.id}) }}" class="btn btn-success">Make regular user</a>
                                {% set break = true %}
                            {% else %}
                                <a href="{{ path('admin_make_user_admin', {'id': user.id}) }}" class="btn btn-success">Make admin</a>
                            {% endif %}
                        {% endif %}
                    {% endfor %}
                </td>
            </tr>
            {% set counter = counter + 1 %}
        {% endfor %}
    </table>

{% endblock %}